---
description: Development workflow and best practices
globs:
  - "backend/**/*"
  - "frontend/**/*"
  - "infra/**/*"
  - "Makefile"
  - "docker-compose.yml"
alwaysApply: true
---

# Development Rules

## Project Structure

```
librarian/
├── backend/           # Rust backend (Axum + async-graphql)
├── frontend/          # React frontend (TanStack Router + HeroUI)
├── docs/              # Documentation
├── Makefile           # Common commands
└── .cursor/rules/     # AI assistant rules
```

## Development Commands

### Backend
```bash
cd backend
cargo run              # Start development server
cargo check            # Fast compilation check
cargo test             # Run tests
cargo fmt              # Format code
cargo clippy           # Lint code
```

### Frontend
```bash
cd frontend
pnpm dev               # Start dev server (port 3000)
pnpm build             # Production build
pnpm test              # Run tests
pnpm exec tsc --noEmit # Type check
```

## Code Quality

### Before Committing
1. Backend: `cargo fmt && cargo clippy && cargo check`
2. Frontend: `pnpm exec tsc --noEmit`
3. Test the feature end-to-end

### Code Style

#### Rust
- Use `rustfmt` defaults
- Prefer `anyhow::Result` for error handling
- Use `tracing` for logging (not `println!`)
- Document public APIs with `///` comments

#### TypeScript
- Use strict TypeScript (no `any` without justification)
- Prefer `const` over `let`
- Use descriptive variable names

### Frontend DevTools
- React DevTools for component inspection
- TanStack Router DevTools for routing
- Console for GraphQL subscription messages

## Common Issues
